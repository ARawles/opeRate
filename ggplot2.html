<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>13.1 ggplot2 | opeRate</title>
  <meta name="description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="13.1 ggplot2 | opeRate" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="cover.png" />
  <meta property="og:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="github-repo" content="ARawles/opeRate" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="13.1 ggplot2 | opeRate" />
  
  <meta name="twitter:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="twitter:image" content="cover.png" />

<meta name="author" content="Adam Rawles" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="plotting.html"/>
<link rel="next" href="modelling.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> opeRate</a>
<ul>
<li class="chapter" data-level="1.1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>1.1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="overview.html"><a href="overview.html#acknowledgements"><i class="fa fa-check"></i><b>1.1.1</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="about-me.html"><a href="about-me.html"><i class="fa fa-check"></i><b>1.2</b> About Me</a></li>
<li class="chapter" data-level="1.3" data-path="using-r.html"><a href="using-r.html"><i class="fa fa-check"></i><b>1.3</b> Using R</a></li>
</ul></li>
<li class="part"><span><b>I tidyverse</b></span></li>
<li class="chapter" data-level="2" data-path="tidyverse-introduction.html"><a href="tidyverse-introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>3</b> “Tidy” data</a></li>
<li class="chapter" data-level="4" data-path="the-pipe.html"><a href="the-pipe.html"><i class="fa fa-check"></i><b>4</b> The pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="5" data-path="quasiquotation.html"><a href="quasiquotation.html"><i class="fa fa-check"></i><b>5</b> Quasiquotation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidyselect.html"><a href="tidyselect.html"><i class="fa fa-check"></i><b>5.1</b> tidyselect</a></li>
</ul></li>
<li class="part"><span><b>II Data Analysis</b></span></li>
<li class="chapter" data-level="6" data-path="da-intro.html"><a href="da-intro.html"><i class="fa fa-check"></i><b>6</b> Introduction</a></li>
<li class="chapter" data-level="7" data-path="loading.html"><a href="loading.html"><i class="fa fa-check"></i><b>7</b> Loading</a>
<ul>
<li class="chapter" data-level="7.1" data-path="rds.html"><a href="rds.html"><i class="fa fa-check"></i><b>7.1</b> RDS</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rds.html"><a href="rds.html#advantages"><i class="fa fa-check"></i><b>7.1.1</b> Advantages</a></li>
<li class="chapter" data-level="7.1.2" data-path="rds.html"><a href="rds.html#disadvantages"><i class="fa fa-check"></i><b>7.1.2</b> Disadvantages</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="csv.html"><a href="csv.html"><i class="fa fa-check"></i><b>7.2</b> CSV</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="csv.html"><a href="csv.html#loading-csv-files"><i class="fa fa-check"></i><b>7.2.1</b> Loading CSV files</a></li>
<li class="chapter" data-level="7.2.2" data-path="csv.html"><a href="csv.html#advantages-1"><i class="fa fa-check"></i><b>7.2.2</b> Advantages</a></li>
<li class="chapter" data-level="7.2.3" data-path="csv.html"><a href="csv.html#disadvantages-1"><i class="fa fa-check"></i><b>7.2.3</b> Disadvantages</a></li>
<li class="chapter" data-level="7.2.4" data-path="csv.html"><a href="csv.html#other-delimited-files"><i class="fa fa-check"></i><b>7.2.4</b> Other delimited files</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="excel-files.html"><a href="excel-files.html"><i class="fa fa-check"></i><b>7.3</b> Excel files</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="excel-files.html"><a href="excel-files.html#advantages-2"><i class="fa fa-check"></i><b>7.3.1</b> Advantages</a></li>
<li class="chapter" data-level="7.3.2" data-path="excel-files.html"><a href="excel-files.html#disadvantages-2"><i class="fa fa-check"></i><b>7.3.2</b> Disadvantages</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="web-based-apis.html"><a href="web-based-apis.html"><i class="fa fa-check"></i><b>7.4</b> Web-based APIs</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="web-based-apis.html"><a href="web-based-apis.html#what-are-apis"><i class="fa fa-check"></i><b>7.4.1</b> What are APIs?</a></li>
<li class="chapter" data-level="7.4.2" data-path="web-based-apis.html"><a href="web-based-apis.html#accessing-apis-in-r"><i class="fa fa-check"></i><b>7.4.2</b> Accessing APIs in R</a></li>
<li class="chapter" data-level="7.4.3" data-path="web-based-apis.html"><a href="web-based-apis.html#bmrsr"><i class="fa fa-check"></i><b>7.4.3</b> BMRSr</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="databases.html"><a href="databases.html"><i class="fa fa-check"></i><b>7.5</b> Databases</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="databases.html"><a href="databases.html#database-management-systems-and-odbc"><i class="fa fa-check"></i><b>7.5.1</b> Database Management Systems and ODBC</a></li>
<li class="chapter" data-level="7.5.2" data-path="databases.html"><a href="databases.html#connecting-with-the-odbc-package"><i class="fa fa-check"></i><b>7.5.2</b> Connecting with the <code>odbc</code> package</a></li>
<li class="chapter" data-level="7.5.3" data-path="databases.html"><a href="databases.html#querying-the-database"><i class="fa fa-check"></i><b>7.5.3</b> Querying the database</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>8</b> Cleaning</a>
<ul>
<li class="chapter" data-level="8.1" data-path="filtering.html"><a href="filtering.html"><i class="fa fa-check"></i><b>8.1</b> Filtering</a></li>
<li class="chapter" data-level="8.2" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>8.2</b> Missing values</a></li>
<li class="chapter" data-level="8.3" data-path="changing-column-types.html"><a href="changing-column-types.html"><i class="fa fa-check"></i><b>8.3</b> Changing column types</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tidying.html"><a href="tidying.html"><i class="fa fa-check"></i><b>9</b> Tidying</a>
<ul>
<li class="chapter" data-level="9.1" data-path="pivoting-columns.html"><a href="pivoting-columns.html"><i class="fa fa-check"></i><b>9.1</b> Pivoting columns</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="pivoting-columns.html"><a href="pivoting-columns.html#pivoting-columns-to-rows-longer"><i class="fa fa-check"></i><b>9.1.1</b> Pivoting columns to rows (longer)</a></li>
<li class="chapter" data-level="9.1.2" data-path="pivoting-columns.html"><a href="pivoting-columns.html#pivoting-rows-to-columns-wider"><i class="fa fa-check"></i><b>9.1.2</b> Pivoting rows to columns (wider)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="grouping.html"><a href="grouping.html"><i class="fa fa-check"></i><b>10</b> Grouping</a></li>
<li class="chapter" data-level="11" data-path="mutating.html"><a href="mutating.html"><i class="fa fa-check"></i><b>11</b> Mutating</a></li>
<li class="chapter" data-level="12" data-path="summarising.html"><a href="summarising.html"><i class="fa fa-check"></i><b>12</b> Summarising</a></li>
<li class="chapter" data-level="13" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>13</b> Plotting</a>
<ul>
<li class="chapter" data-level="13.1" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>13.1</b> ggplot2</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="ggplot2.html"><a href="ggplot2.html#components"><i class="fa fa-check"></i><b>13.1.1</b> Components</a></li>
<li class="chapter" data-level="13.1.2" data-path="ggplot2.html"><a href="ggplot2.html#stats"><i class="fa fa-check"></i><b>13.1.2</b> Stats</a></li>
<li class="chapter" data-level="13.1.3" data-path="ggplot2.html"><a href="ggplot2.html#layers"><i class="fa fa-check"></i><b>13.1.3</b> Layers</a></li>
<li class="chapter" data-level="13.1.4" data-path="ggplot2.html"><a href="ggplot2.html#scales"><i class="fa fa-check"></i><b>13.1.4</b> Scales</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="modelling.html"><a href="modelling.html"><i class="fa fa-check"></i><b>14</b> Modelling</a></li>
<li class="part"><span><b>III Projects</b></span></li>
<li class="chapter" data-level="15" data-path="projects-introduction.html"><a href="projects-introduction.html"><i class="fa fa-check"></i><b>15</b> Introduction</a></li>
<li class="chapter" data-level="16" data-path="workflows.html"><a href="workflows.html"><i class="fa fa-check"></i><b>16</b> Workflows</a>
<ul>
<li class="chapter" data-level="16.1" data-path="basic-workflow.html"><a href="basic-workflow.html"><i class="fa fa-check"></i><b>16.1</b> Basic Workflow</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="basic-workflow.html"><a href="basic-workflow.html#example-1-reporting"><i class="fa fa-check"></i><b>16.1.1</b> Example 1: Reporting</a></li>
<li class="chapter" data-level="16.1.2" data-path="basic-workflow.html"><a href="basic-workflow.html#example-2-modelling"><i class="fa fa-check"></i><b>16.1.2</b> Example 2: Modelling</a></li>
<li class="chapter" data-level="16.1.3" data-path="basic-workflow.html"><a href="basic-workflow.html#summary"><i class="fa fa-check"></i><b>16.1.3</b> Summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="replicability.html"><a href="replicability.html"><i class="fa fa-check"></i><b>17</b> Replicability</a>
<ul>
<li class="chapter" data-level="17.1" data-path="good-practice.html"><a href="good-practice.html"><i class="fa fa-check"></i><b>17.1</b> Good practice</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="good-practice.html"><a href="good-practice.html#use-a-consistent-naming-convention"><i class="fa fa-check"></i><b>17.1.1</b> Use a consistent naming convention</a></li>
<li class="chapter" data-level="17.1.2" data-path="good-practice.html"><a href="good-practice.html#name-your-variables-as-nouns-and-your-functions-as-verbs"><i class="fa fa-check"></i><b>17.1.2</b> Name your variables as nouns and your functions as verbs</a></li>
<li class="chapter" data-level="17.1.3" data-path="good-practice.html"><a href="good-practice.html#use-functions-where-you-can"><i class="fa fa-check"></i><b>17.1.3</b> Use functions where you can</a></li>
<li class="chapter" data-level="17.1.4" data-path="good-practice.html"><a href="good-practice.html#state-your-dependencies"><i class="fa fa-check"></i><b>17.1.4</b> State your dependencies</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="documentation.html"><a href="documentation.html"><i class="fa fa-check"></i><b>17.2</b> Documentation</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="documentation.html"><a href="documentation.html#function-documentation"><i class="fa fa-check"></i><b>17.2.1</b> Function documentation</a></li>
<li class="chapter" data-level="17.2.2" data-path="documentation.html"><a href="documentation.html#long-form-documentation"><i class="fa fa-check"></i><b>17.2.2</b> Long-form documentation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="projects-as-packages.html"><a href="projects-as-packages.html"><i class="fa fa-check"></i><b>18</b> Projects as Packages</a>
<ul>
<li class="chapter" data-level="18.1" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>18.1</b> Structure</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="structure.html"><a href="structure.html#r-code"><i class="fa fa-check"></i><b>18.1.1</b> R code</a></li>
<li class="chapter" data-level="18.1.2" data-path="structure.html"><a href="structure.html#data"><i class="fa fa-check"></i><b>18.1.2</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="documentation-1.html"><a href="documentation-1.html"><i class="fa fa-check"></i><b>18.2</b> Documentation</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="documentation-1.html"><a href="documentation-1.html#functional"><i class="fa fa-check"></i><b>18.2.1</b> Functional</a></li>
<li class="chapter" data-level="18.2.2" data-path="documentation-1.html"><a href="documentation-1.html#long-form"><i class="fa fa-check"></i><b>18.2.2</b> Long-form</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="description.html"><a href="description.html"><i class="fa fa-check"></i><b>18.3</b> DESCRIPTION</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="description.html"><a href="description.html#dependencies"><i class="fa fa-check"></i><b>18.3.1</b> Dependencies</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="abstraction.html"><a href="abstraction.html"><i class="fa fa-check"></i><b>18.4</b> Abstraction</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="git-github.html"><a href="git-github.html"><i class="fa fa-check"></i><b>19</b> Git &amp; GitHub</a></li>
<li class="chapter" data-level="20" data-path="project-example.html"><a href="project-example.html"><i class="fa fa-check"></i><b>20</b> Project Example</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">opeRate</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2" class="section level2" number="13.1">
<h2><span class="header-section-number">13.1</span> ggplot2</h2>
<p><code>{ggplot2}</code> is based on the concept of a <a href="https://www.springer.com/in/book/9780387245447">Grammar of Graphics</a>. This is the concept that, like language, graphics have a grammar that allow us to describe their components.</p>
<p>This concept was originally proposed by Leland Wilkinson, but has been adopted heavily in the <code>{ggplot2}</code> philosophy, with Hadley Wickham publishing a paper titled <a href="http://vita.had.co.nz/papers/layered-grammar.html">‘A Layered Grammer of Graphics’</a> that outlines his proposal for a layered grammar and how it’s implemented in <code>{ggplot2}</code>. We’ll cover the real basics of <code>{ggplot2}</code> here but I’d recommend reading the paper and reading the <code>{ggplot2}</code> <a href="https://ggplot2.tidyverse.org/">documentation</a> if you’re interested in gaining a deeper understanding.</p>
<div id="components" class="section level3" number="13.1.1">
<h3><span class="header-section-number">13.1.1</span> Components</h3>
<p>At the core of the Grammar of Graphics philosophy is the idea that plots are defined by their components. For example, two scatterplots could be extremely different, even though we’d both call them scatterplots. Instead, the two graphics are better defined by the components that make them up.</p>
<p>When we create a plot using <code>{ggplot2}</code> we build it up by creating and combining these components.</p>
<p>The main components that make up a plot are:</p>
<ul>
<li>Data and aesthetics mappings</li>
<li>Scales</li>
<li>Geometrics objects (or geoms)</li>
<li>Facets</li>
</ul>
<p>These sound really scary, but they’re actually super simple. Let’s look at each one.</p>
<div id="data-and-aesthetic-mappings" class="section level4" number="13.1.1.1">
<h4><span class="header-section-number">13.1.1.1</span> Data and aesthetic mappings</h4>
<p>Every plot is a representation of some data. Therefore, to have a graphic, you need some data. That’s simple enough.</p>
<p>But which parts of the data should be shown on the plot and where? This is what our aesthetic mappings represent. We might have a dataset with two variables, <code>z</code> and <code>w</code>. Our mapping may be then that we want the <code>z</code> variable on the x axis of the plot, and the <code>w</code> variable on the y axis. We can also utilise other mappings like colour and size.</p>
<p>To define our dataset and our aesthetic mappings using <code>{ggplot2}</code>, we use the <code>ggplot()</code> and <code>aes()</code> functions. Let’s see an example using our video game sales experiment from the previous chapters:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="ggplot2.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb103-2"><a href="ggplot2.html#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="ggplot2.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smmrsd_vg_sales, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Sales, <span class="at">colour =</span> Publisher))</span></code></pre></div>
<p><img src="opeRate_files/figure-html/unnamed-chunk-57-1.png" width="672" /></p>
<p>Here we’ve defined that we want to show the <code>Year</code> on the X axis, the <code>Total_Global_Sales</code> on the Y, and we want to map the <code>Publisher</code> to the colour of whatever we show on the plot.</p>
<p>As part of our mapping, we can see that <code>{ggplot2}</code> has also provided appropriate scales for our variables. It’s provided a numeric scale with an appropriate range for the X and Y axis. We can’t see it yet, but it’s also assigned a scale to our colour aesthetic, mapping colours to values in the Publisher column. We’ll look at manually specifying and customising the scales later.</p>
<p>Although we’ve got our scales, and we can see that <code>{ggplot2}</code> clearly knows which variable we want on each axis, but there’s nothing on the graph at the moment… This is because we now need to define our geoms.</p>
<div id="geometric-objects-geoms" class="section level5" number="13.1.1.1.1">
<h5><span class="header-section-number">13.1.1.1.1</span> Geometric objects (geoms)</h5>
<p>Our geometric objects will be the object that’s actually shown on the plot (e.g. bars, points, lines, and so on). To add our geometric object, we use the <code>geom_...</code> functions. Our geom will then inherit the mapping from our <code>ggplot()</code> call. If we wanted to add additional mappings, the <code>geom_...</code> functions also allow for a <code>mapping</code> parameter where additional mappings can be provided.</p>
<p>We want lines for our example, so we use the <code>geom_line()</code> function. To add our geom component, we just need to add it to our plot so far using the <code>+</code> operator:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="ggplot2.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smmrsd_vg_sales, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Sales, <span class="at">colour =</span> Publisher)) <span class="sc">+</span></span>
<span id="cb104-2"><a href="ggplot2.html#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="opeRate_files/figure-html/unnamed-chunk-58-1.png" width="672" /></p>
<p>This is equivalent to:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="ggplot2.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smmrsd_vg_sales) <span class="sc">+</span></span>
<span id="cb105-2"><a href="ggplot2.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Sales, <span class="at">colour =</span> Publisher))</span></code></pre></div>
<p>Different geoms also allow for different mappings. For example, the line geom allows you to specify the <code>linetype</code> aesthetic that changes the way the line is drawn (solid, dashed, etc.) depending on the value of your variable. This aesthetic would mean nothing for the point geom however, which instead has an aesthetic called <code>shape</code>. To see which aesthetics are supported by which geoms, look at the documentation for the geom function you want to use (e.g <code>?geom_point</code>).</p>
</div>
</div>
</div>
<div id="stats" class="section level3" number="13.1.2">
<h3><span class="header-section-number">13.1.2</span> Stats</h3>
<p>For a data point to be shown on the plot, it can go through a statistical transformation or ‘stat’ which is set via the <code>stat</code> parameter of our <code>geom_...</code> function. We can see that when we call <code>geom_point()</code> the default value for the <code>stat</code> parameter is ‘identity’. This means that <code>{ggplot2}</code> performs no stat transformation on the data before it plots it.</p>
<p>We can change this however, so that some form of stat is done on the data before it’s plotted. For example, if we set the <code>stat</code> parameter to ‘smooth’, the values are transformed by a smoothing function (the function can be changed via the <code>method</code> parameter):</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="ggplot2.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smmrsd_vg_sales) <span class="sc">+</span></span>
<span id="cb106-2"><a href="ggplot2.html#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Sales, <span class="at">colour =</span> Publisher), <span class="at">stat =</span> <span class="st">&quot;smooth&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="opeRate_files/figure-html/unnamed-chunk-60-1.png" width="672" /></p>
<p>This call is equivalent to using the <code>geom_smooth()</code> function.</p>
</div>
<div id="layers" class="section level3" number="13.1.3">
<h3><span class="header-section-number">13.1.3</span> Layers</h3>
<p>Together, the data, mapping, stat and geom components form a <strong>layer</strong>. A plot can be made up of multiple layers. For example, let’s show the same data but overlay a regression line that uses a different stat and a different mapping:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="ggplot2.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smmrsd_vg_sales, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Sales)) <span class="sc">+</span></span>
<span id="cb108-2"><a href="ggplot2.html#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">colour =</span> Publisher)) <span class="sc">+</span></span>
<span id="cb108-3"><a href="ggplot2.html#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> x)</span></code></pre></div>
<p><img src="opeRate_files/figure-html/unnamed-chunk-61-1.png" width="672" /></p>
<p>We’ve now got two layers to this plot, with slightly different mappings and stats. The colours lines are split by Publisher, but the regression line does not use that colour mapping, meaning that we have one line for all the Publishers. The coloured lines also have no stat transformation, where the regression line does use a stat transformation - it calculates a smooth conditional mean of y given x (<code>y ~ x</code>). In fact, we could even change the dataset for the two layers if we wanted to.</p>
<p>In summary, a layer is made up of:</p>
<ul>
<li>A dataset and aesthetic mapping (aes)</li>
<li>A statistical transformation (stat)</li>
<li>A geometric object (geom)</li>
</ul>
<p>And plots can be made of up one or more layers.</p>
<div id="facet" class="section level4" number="13.1.3.1">
<h4><span class="header-section-number">13.1.3.1</span> Facet</h4>
<p>In our example, we’ve shown the Publisher column as a mapping to the colour aesthetic, but we could also use faceting. Faceting splits the original dataset, plots the data separately and then combines it into a single panel. To facet our plot, we use the <code>facet_wrap()</code> or <code>facet_grid()</code> functions:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="ggplot2.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smmrsd_vg_sales, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Sales, <span class="at">colour =</span> Publisher)) <span class="sc">+</span></span>
<span id="cb109-2"><a href="ggplot2.html#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb109-3"><a href="ggplot2.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Publisher)</span></code></pre></div>
<p><img src="opeRate_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>Facets are not features of layers, but instead are universal to the plot.</p>
</div>
</div>
<div id="scales" class="section level3" number="13.1.4">
<h3><span class="header-section-number">13.1.4</span> Scales</h3>
<p><code>{ggplot2}</code> has created default scales for the variables in our mapping, but we can alter them manually. To do so, we just use the accompanying <code>scale_{aesthetic}_{type}</code> function. So for our x axis, we’re scaling our x mapping and we want a continuous, numeric scale so we would use the <code>scale_x_continous()</code> function. Similarly, for our y axis we’d use <code>scale_y_continuous()</code>:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="ggplot2.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smmrsd_vg_sales, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Sales)) <span class="sc">+</span></span>
<span id="cb110-2"><a href="ggplot2.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">colour =</span> Publisher)) <span class="sc">+</span></span>
<span id="cb110-3"><a href="ggplot2.html#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> x) <span class="sc">+</span></span>
<span id="cb110-4"><a href="ggplot2.html#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Year&quot;</span>) <span class="sc">+</span></span>
<span id="cb110-5"><a href="ggplot2.html#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Let&#39;s change the limits to stop at 0</span></span>
<span id="cb110-6"><a href="ggplot2.html#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Total Sales (Millions)&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>))</span></code></pre></div>
<p><img src="opeRate_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
<p>To change the colour scale, we would use the <code>scale_colour_brewer/hue()</code> function. These two functions take a slightly different approach in how they assign colours to the levels of the variable.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="ggplot2.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smmrsd_vg_sales, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Sales)) <span class="sc">+</span></span>
<span id="cb111-2"><a href="ggplot2.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">colour =</span> Publisher)) <span class="sc">+</span></span>
<span id="cb111-3"><a href="ggplot2.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> x) <span class="sc">+</span></span>
<span id="cb111-4"><a href="ggplot2.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Year&quot;</span>) <span class="sc">+</span></span>
<span id="cb111-5"><a href="ggplot2.html#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Total Sales (Millions)&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb111-6"><a href="ggplot2.html#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_brewer</span>(<span class="at">name =</span> <span class="st">&quot;Publisher&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;BrBG&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 5 rows containing missing values (geom_smooth).</code></pre>
<p><img src="opeRate_files/figure-html/unnamed-chunk-64-1.png" width="672" /></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="ggplot2.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smmrsd_vg_sales, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Sales)) <span class="sc">+</span></span>
<span id="cb113-2"><a href="ggplot2.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">colour =</span> Publisher)) <span class="sc">+</span></span>
<span id="cb113-3"><a href="ggplot2.html#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> x) <span class="sc">+</span></span>
<span id="cb113-4"><a href="ggplot2.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Year&quot;</span>) <span class="sc">+</span></span>
<span id="cb113-5"><a href="ggplot2.html#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Total Sales (Millions)&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb113-6"><a href="ggplot2.html#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_colour_hue</span>(<span class="at">name =</span> <span class="st">&quot;Publisher&quot;</span>, <span class="at">l =</span> <span class="dv">40</span>, <span class="at">c =</span> <span class="dv">30</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 5 rows containing missing values (geom_smooth).</code></pre>
<p><img src="opeRate_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
<p>Scales, like facets, are not components of layers. They will be constant across all layers in the plot.</p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="plotting.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="modelling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
