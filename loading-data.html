<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.1 Loading data | opeRate</title>
  <meta name="description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3.1 Loading data | opeRate" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="cover.png" />
  <meta property="og:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="github-repo" content="ARawles/opeRate" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.1 Loading data | opeRate" />
  
  <meta name="twitter:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="twitter:image" content="cover.png" />

<meta name="author" content="Adam Rawles" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="data-analysis.html"/>
<link rel="next" href="using-apis.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> opeRate</a>
<ul>
<li class="chapter" data-level="1.1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>1.1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="overview.html"><a href="overview.html#acknowledgements"><i class="fa fa-check"></i><b>1.1.1</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="about-me.html"><a href="about-me.html"><i class="fa fa-check"></i><b>1.2</b> About Me</a></li>
<li class="chapter" data-level="1.3" data-path="using-r.html"><a href="using-r.html"><i class="fa fa-check"></i><b>1.3</b> Using R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>2</b> Projects</a>
<ul>
<li class="chapter" data-level="2.1" data-path="workflows.html"><a href="workflows.html"><i class="fa fa-check"></i><b>2.1</b> Workflows</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="workflows.html"><a href="workflows.html#basic-workflows"><i class="fa fa-check"></i><b>2.1.1</b> Basic Workflows</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="replicability.html"><a href="replicability.html"><i class="fa fa-check"></i><b>2.2</b> Replicability</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="replicability.html"><a href="replicability.html#good-practice"><i class="fa fa-check"></i><b>2.2.1</b> Good practice</a></li>
<li class="chapter" data-level="2.2.2" data-path="replicability.html"><a href="replicability.html#documentation"><i class="fa fa-check"></i><b>2.2.2</b> Documentation</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="projects-as-packages.html"><a href="projects-as-packages.html"><i class="fa fa-check"></i><b>2.3</b> Projects as Packages</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="projects-as-packages.html"><a href="projects-as-packages.html#structure"><i class="fa fa-check"></i><b>2.3.1</b> Structure</a></li>
<li class="chapter" data-level="2.3.2" data-path="projects-as-packages.html"><a href="projects-as-packages.html#documentation-1"><i class="fa fa-check"></i><b>2.3.2</b> Documentation</a></li>
<li class="chapter" data-level="2.3.3" data-path="projects-as-packages.html"><a href="projects-as-packages.html#description"><i class="fa fa-check"></i><b>2.3.3</b> DESCRIPTION</a></li>
<li class="chapter" data-level="2.3.4" data-path="projects-as-packages.html"><a href="projects-as-packages.html#abstraction"><i class="fa fa-check"></i><b>2.3.4</b> Abstraction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-analysis.html"><a href="data-analysis.html"><i class="fa fa-check"></i><b>3</b> Data Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="loading-data.html"><a href="loading-data.html"><i class="fa fa-check"></i><b>3.1</b> Loading data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="loading-data.html"><a href="loading-data.html#csv"><i class="fa fa-check"></i><b>3.1.1</b> csv</a></li>
<li class="chapter" data-level="3.1.2" data-path="loading-data.html"><a href="loading-data.html#excel-files"><i class="fa fa-check"></i><b>3.1.2</b> Excel files</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="using-apis.html"><a href="using-apis.html"><i class="fa fa-check"></i><b>3.2</b> Using APIs</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="using-apis.html"><a href="using-apis.html#what-are-apis"><i class="fa fa-check"></i><b>3.2.1</b> What are APIs?</a></li>
<li class="chapter" data-level="3.2.2" data-path="using-apis.html"><a href="using-apis.html#accessing-apis-in-r"><i class="fa fa-check"></i><b>3.2.2</b> Accessing APIs in R</a></li>
<li class="chapter" data-level="3.2.3" data-path="using-apis.html"><a href="using-apis.html#bmrsr"><i class="fa fa-check"></i><b>3.2.3</b> BMRSr</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="cleaning-and-tidying-data.html"><a href="cleaning-and-tidying-data.html"><i class="fa fa-check"></i><b>3.3</b> Cleaning and tidying data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="cleaning-and-tidying-data.html"><a href="cleaning-and-tidying-data.html#cleaning"><i class="fa fa-check"></i><b>3.3.1</b> Cleaning</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="section.html"><a href="section.html"><i class="fa fa-check"></i><b>3.4</b> </a></li>
<li class="chapter" data-level="3.5" data-path="summarisation.html"><a href="summarisation.html"><i class="fa fa-check"></i><b>3.5</b> Summarisation</a></li>
<li class="chapter" data-level="3.6" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>3.6</b> Plotting</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="advanced-data-analysis.html"><a href="advanced-data-analysis.html"><i class="fa fa-check"></i><b>4</b> Advanced data analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="plotting-1.html"><a href="plotting-1.html"><i class="fa fa-check"></i><b>4.1</b> Plotting</a></li>
<li class="chapter" data-level="4.2" data-path="modelling.html"><a href="modelling.html"><i class="fa fa-check"></i><b>4.2</b> Modelling</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">opeRate</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="loading-data" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Loading data</h2>
<p>The first step in any data analysis project you’ll undertake is getting at least one dataset. Oftentimes, we have less control over the data we use than we would like; receiving odd Excel spreadsheets or text files or proprietary files or whatever. In this chapter, we’ll focus on the more typical data formats (csv and Excel), but we’ll also look at how we might extract data from a web API, which is an increasingly common method for data loading.</p>
<div id="csv" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> csv</h3>
<p>If I have any say in the data format of the files I need to load in, I usually ask for them to be in csv format. CSV stands for “comma-separated values” and essentially means that the data is stored as one long text string, with each different value or cell separated by a comma. So for example, a really simple csv file may look, in its most base format, like this:</p>
<pre><code>name,age,
Dave,35,
Simon,60,
Anna,24,
Patricia,75</code></pre>
<p>Benefits of the csv file over something like an Excel file are largely based around simplicity. csv files are typically smaller and can only have one sheet, meaning that you won’t get confused with multiple spreadsheets. Furthermore, values in csv files are essentially what you see is what you get. With Excel files, sometimes the value that you see in Excel isn’t the value that ends up in R. For these reasons, I would suggest using a separated-value file over an Excel file when you can.</p>
<div id="loading-.csv-files" class="section level4" number="3.1.1.1">
<h4><span class="header-section-number">3.1.1.1</span> Loading .csv files</h4>
<p>Loading csv files in R is relatively simple. There are base* functions that come with R to load csv files but there’s also a popular package called <code>readr</code> which can be used so I’ll cover both.</p>
<p>* They are technically from the <code>utils</code> package which comes bundled with R so we’ll call it base R.</p>
<div id="base" class="section level5" number="3.1.1.1.1">
<h5><span class="header-section-number">3.1.1.1.1</span> Base</h5>
<p>To load a csv file using base R, we’ll use the <code>read.csv()</code> function:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="loading-data.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="at">file =</span> <span class="st">&quot;path/to/your/file&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, ...)</span></code></pre></div>
<p>The <code>file</code> parameters needs the path to your file as a character string. The <code>header</code> parameter is used to tell R whether or not your file has column headers.</p>
<p>There are lots of other parameters that can be tweaked for the <code>read.csv()</code> function, but we won’t go through them here.</p>
</div>
<div id="readr" class="section level5" number="3.1.1.1.2">
<h5><span class="header-section-number">3.1.1.1.2</span> readr</h5>
<p>The <code>readr</code> package comes with a similar function: <code>read_csv()</code>. With the exception of a couple of extra parameters in the <code>read_csv()</code> function and potentially some better efficiency, there isn’t a massive difference between the two.</p>
<p>Using the <code>read_csv()</code> function is simple:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="loading-data.html#cb4-1" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">&quot;path/to/your/file&quot;</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>In this function, the <code>header</code> parameter is replaced with the <code>col_names</code> parameter. The <code>col_names</code> parameter is very similar, you can say whether your dataset has column headings, or you can provide a character vector of names to be used as column headers.</p>
<p>There are also some extra parameters in the <code>read_csv()</code> function that can be useful. The <code>col_types</code> parameter lets you specify what datatype each column should be treated as. This can either be provided using the <code>cols()</code> helper function like this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="loading-data.html#cb5-1" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">&quot;path/to/file&quot;</span>,</span>
<span id="cb5-2"><a href="loading-data.html#cb5-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">col_names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-3"><a href="loading-data.html#cb5-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">col_types =</span> readr<span class="sc">::</span><span class="fu">cols</span>(</span>
<span id="cb5-4"><a href="loading-data.html#cb5-4" aria-hidden="true" tabindex="-1"></a>                  readr<span class="sc">::</span><span class="fu">col_character</span>(), readr<span class="sc">::</span><span class="fu">col_double</span>()</span>
<span id="cb5-5"><a href="loading-data.html#cb5-5" aria-hidden="true" tabindex="-1"></a>                ),</span>
<span id="cb5-6"><a href="loading-data.html#cb5-6" aria-hidden="true" tabindex="-1"></a>                ...</span>
<span id="cb5-7"><a href="loading-data.html#cb5-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Or, you can provide a compact string with different letters representing different datatypes:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="loading-data.html#cb6-1" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">&quot;path/to/file&quot;</span>,</span>
<span id="cb6-2"><a href="loading-data.html#cb6-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">col_names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-3"><a href="loading-data.html#cb6-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">col_types =</span> <span class="st">&quot;cd&quot;</span>,</span>
<span id="cb6-4"><a href="loading-data.html#cb6-4" aria-hidden="true" tabindex="-1"></a>                ...</span>
<span id="cb6-5"><a href="loading-data.html#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The codes for the different datatypes can be found on the documentation page for the <code>read_csv()</code> function (type <code>?read_csv()</code>).</p>
<p>The <code>trim_ws</code> parameter can also be helpful if you have a dataset with lots of trailing whitespace around your values. When set to true, the <code>read_csv()</code> function will automatically trim each field before loading it in.</p>
<p>Overall, both functions will give you the same result, so just choose whichever function makes most sense to you and has the parameters you need.</p>
</div>
</div>
</div>
<div id="excel-files" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Excel files</h3>
<p>R doesn’t have any built-in functions to load Excel files. Instead, you’ll need to use a package. One of the more popular packages used to read Excel files is the <code>readxl</code> package.</p>
<p>Once you’ve installed and loaded the <code>readxl</code> package. You can use the <code>read_excel()</code> function:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="loading-data.html#cb7-1" aria-hidden="true" tabindex="-1"></a>readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">&quot;path/to/file&quot;</span>, <span class="at">sheet =</span> <span class="cn">NULL</span>, <span class="at">range =</span> <span class="cn">NULL</span>, ...)</span></code></pre></div>
<p>Because Excel files are a little bit more complicated than csv files, you’ll notice that there are some extra parameters. Most notably, the sheet and range parameters can be used to define a subset of the entire Excel file to be loaded. By default, both are set to NULL, which will mean that R will load the entirety of the first sheet.</p>
<p>Like the <code>readr::read_csv()</code> function, you can specify column names and types using the <code>col_names</code> and <code>col_types</code> parameters respectively, and also trim your values using <code>trim_ws</code>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="using-apis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
