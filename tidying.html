<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.3 Tidying | opeRate</title>
  <meta name="description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3.3 Tidying | opeRate" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="cover.png" />
  <meta property="og:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="github-repo" content="ARawles/opeRate" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.3 Tidying | opeRate" />
  
  <meta name="twitter:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="twitter:image" content="cover.png" />

<meta name="author" content="Adam Rawles" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="cleaning.html"/>
<link rel="next" href="grouping.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> opeRate</a>
<ul>
<li class="chapter" data-level="1.1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>1.1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="overview.html"><a href="overview.html#acknowledgements"><i class="fa fa-check"></i><b>1.1.1</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="about-me.html"><a href="about-me.html"><i class="fa fa-check"></i><b>1.2</b> About Me</a></li>
<li class="chapter" data-level="1.3" data-path="using-r.html"><a href="using-r.html"><i class="fa fa-check"></i><b>1.3</b> Using R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>2</b> tidyverse</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>2.1</b> “Tidy” data</a></li>
<li class="chapter" data-level="2.2" data-path="the-pipe.html"><a href="the-pipe.html"><i class="fa fa-check"></i><b>2.2</b> The pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="2.3" data-path="quasiquotation.html"><a href="quasiquotation.html"><i class="fa fa-check"></i><b>2.3</b> Quasiquotation</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="quasiquotation.html"><a href="quasiquotation.html#tidyselect"><i class="fa fa-check"></i><b>2.3.1</b> tidyselect</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-analysis.html"><a href="data-analysis.html"><i class="fa fa-check"></i><b>3</b> Data Analysis</a>
<ul>
<li class="chapter" data-level="3.1" data-path="loading.html"><a href="loading.html"><i class="fa fa-check"></i><b>3.1</b> Loading</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="loading.html"><a href="loading.html#rds"><i class="fa fa-check"></i><b>3.1.1</b> RDS</a></li>
<li class="chapter" data-level="3.1.2" data-path="loading.html"><a href="loading.html#csv"><i class="fa fa-check"></i><b>3.1.2</b> CSV</a></li>
<li class="chapter" data-level="3.1.3" data-path="loading.html"><a href="loading.html#excel-files"><i class="fa fa-check"></i><b>3.1.3</b> Excel files</a></li>
<li class="chapter" data-level="3.1.4" data-path="loading.html"><a href="loading.html#web-based-apis"><i class="fa fa-check"></i><b>3.1.4</b> Web-based APIs</a></li>
<li class="chapter" data-level="3.1.5" data-path="loading.html"><a href="loading.html#databases"><i class="fa fa-check"></i><b>3.1.5</b> Databases</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>3.2</b> Cleaning</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="cleaning.html"><a href="cleaning.html#filtering"><i class="fa fa-check"></i><b>3.2.1</b> Filtering</a></li>
<li class="chapter" data-level="3.2.2" data-path="cleaning.html"><a href="cleaning.html#missing-values"><i class="fa fa-check"></i><b>3.2.2</b> Missing values</a></li>
<li class="chapter" data-level="3.2.3" data-path="cleaning.html"><a href="cleaning.html#changing-column-types"><i class="fa fa-check"></i><b>3.2.3</b> Changing column types</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="tidying.html"><a href="tidying.html"><i class="fa fa-check"></i><b>3.3</b> Tidying</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="tidying.html"><a href="tidying.html#pivoting-columns"><i class="fa fa-check"></i><b>3.3.1</b> Pivoting columns</a></li>
<li class="chapter" data-level="3.3.2" data-path="tidying.html"><a href="tidying.html#pivoting-columns-to-rows-longer"><i class="fa fa-check"></i><b>3.3.2</b> Pivoting columns to rows (longer)</a></li>
<li class="chapter" data-level="3.3.3" data-path="tidying.html"><a href="tidying.html#pivoting-rows-to-columns-wider"><i class="fa fa-check"></i><b>3.3.3</b> Pivoting rows to columns (wider)</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="grouping.html"><a href="grouping.html"><i class="fa fa-check"></i><b>3.4</b> Grouping</a></li>
<li class="chapter" data-level="3.5" data-path="mutating.html"><a href="mutating.html"><i class="fa fa-check"></i><b>3.5</b> Mutating</a></li>
<li class="chapter" data-level="3.6" data-path="summarising.html"><a href="summarising.html"><i class="fa fa-check"></i><b>3.6</b> Summarising</a></li>
<li class="chapter" data-level="3.7" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>3.7</b> Plotting</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>4</b> Projects</a>
<ul>
<li class="chapter" data-level="4.1" data-path="workflows.html"><a href="workflows.html"><i class="fa fa-check"></i><b>4.1</b> Workflows</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="workflows.html"><a href="workflows.html#basic-workflow"><i class="fa fa-check"></i><b>4.1.1</b> Basic Workflow</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="replicability.html"><a href="replicability.html"><i class="fa fa-check"></i><b>4.2</b> Replicability</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="replicability.html"><a href="replicability.html#good-practice"><i class="fa fa-check"></i><b>4.2.1</b> Good practice</a></li>
<li class="chapter" data-level="4.2.2" data-path="replicability.html"><a href="replicability.html#documentation"><i class="fa fa-check"></i><b>4.2.2</b> Documentation</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="projects-as-packages.html"><a href="projects-as-packages.html"><i class="fa fa-check"></i><b>4.3</b> Projects as Packages</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="projects-as-packages.html"><a href="projects-as-packages.html#structure"><i class="fa fa-check"></i><b>4.3.1</b> Structure</a></li>
<li class="chapter" data-level="4.3.2" data-path="projects-as-packages.html"><a href="projects-as-packages.html#documentation-1"><i class="fa fa-check"></i><b>4.3.2</b> Documentation</a></li>
<li class="chapter" data-level="4.3.3" data-path="projects-as-packages.html"><a href="projects-as-packages.html#description"><i class="fa fa-check"></i><b>4.3.3</b> DESCRIPTION</a></li>
<li class="chapter" data-level="4.3.4" data-path="projects-as-packages.html"><a href="projects-as-packages.html#abstraction"><i class="fa fa-check"></i><b>4.3.4</b> Abstraction</a></li>
<li class="chapter" data-level="4.3.5" data-path="projects-as-packages.html"><a href="projects-as-packages.html#example"><i class="fa fa-check"></i><b>4.3.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="git.html"><a href="git.html"><i class="fa fa-check"></i><b>4.4</b> Git</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">opeRate</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidying" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Tidying</h2>
<p>Now that you know your dataset is clean, you’ll want to get it into a format that is amenable to your analysis. This is the <strong>tidying</strong> stage. To better understand what “tidy” data is and why we’re trying to get our data into this format, make sure you’ve read the <a href="tidyverse.html#tidyverse">tidyverse</a> chapter.</p>
<div id="pivoting-columns" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Pivoting columns</h3>
<p>There two different forms of data:
* Long
* Wide</p>
<p>Tidy data takes this long form - as you add more observations, you’ll add more rows.
Untidy data often takes the wide form - as you add more observations, you’ll add more columns.</p>
<p>Let’s look at an example. Imagine the following dataset showing the average temperature each year and in each month:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="tidying.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(column_example, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   Year Month1 Month2 Month3
## 1 2012     10     20     30
## 2 2013     20     30     40
## 3 2014     30     40     50</code></pre>
<p>As you can see, the more months we add, the wider the data is going to get. How would the same data look in the long (tidy) format?</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="tidying.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(column_example_long, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   Year  Month Temperature
##   &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;
## 1 2012      1          10
## 2 2012      2          20
## 3 2012      3          30</code></pre>
<p>Now we’ve got the month as a variable, the more data we add, the longer the dataset is going to get.</p>
<p><strong>Note:</strong>
One thing to keep in mind is that long data does not always mean tidy, but wide data cann never be tidy. It’s a subtle distinction but it’s important to remember.</p>
<p>Wide data is very common, usually because it’s slightly easier to read or to enter (particularly if you’re using Excel), but it’s much harder to work with in R. Let’s look at how we might convert wide data to tidy-er long data.</p>
</div>
<div id="pivoting-columns-to-rows-longer" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Pivoting columns to rows (longer)</h3>
<p>Wide data will always be untidy because it breaks the first rule of tidy data: each column should be a separate variable. Let’s revisit our wide example:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="tidying.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(column_example, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   Year Month1 Month2 Month3
## 1 2012     10     20     30
## 2 2013     20     30     40
## 3 2014     30     40     50</code></pre>
<p>In this example dataset, we’ve clearly broken the first rule of tidy data: each column is not a unique variable. Instead, we’ve got the same variable (temperature) in different columns for each month.</p>
<p>How can we convert this example dataset to the tidy, long format? Well, we can utilise the concept of pivoting to transform those month columns into two columns; one with the value (the temperature) and the other with the month. In this case, we need to use the <code>pivot_longer()</code> function from the <code>{tidyr}</code> package, because we want to pivot from the wide format to the long format.</p>
<p>To do this in the simplest way, we just need to tell the function which columns we want to pivot:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="tidying.html#cb64-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(column_example, <span class="at">cols =</span> <span class="fu">c</span>(Month1, Month2, Month3))</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   Year  name   value
##   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1 2012  Month1    10
## 2 2012  Month2    20
## 3 2012  Month3    30
## 4 2013  Month1    20
## 5 2013  Month2    30
## 6 2013  Month3    40
## 7 2014  Month1    30
## 8 2014  Month2    40
## 9 2014  Month3    50</code></pre>
<p>This is a good start. Now we’ve converted to long format, we’re abiding by the three rules and so we’ve got a tidy dataset! But there’s definitely some improvements to be done. Firstly, “name” and “value” aren’t the best names we could come up with for these columns, so we should probably use some new ones. To do this, we just need to provide new names to the <code>names_to</code> and <code>values_to</code> parameters:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="tidying.html#cb66-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(column_example,</span>
<span id="cb66-2"><a href="tidying.html#cb66-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">cols =</span> <span class="fu">c</span>(Month1, Month2, Month3),</span>
<span id="cb66-3"><a href="tidying.html#cb66-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">names_to =</span> <span class="st">&quot;Month&quot;</span>,</span>
<span id="cb66-4"><a href="tidying.html#cb66-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">values_to =</span> <span class="st">&quot;Temperature&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   Year  Month  Temperature
##   &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;
## 1 2012  Month1          10
## 2 2012  Month2          20
## 3 2012  Month3          30
## 4 2013  Month1          20
## 5 2013  Month2          30
## 6 2013  Month3          40
## 7 2014  Month1          30
## 8 2014  Month2          40
## 9 2014  Month3          50</code></pre>
<p>Secondly, our Month column has the months as character string and prepended with “Month”. Instead, we should store just the month number as a number (or maybe as a factor but we’ll go with number). To do that, we can utilise the <code>names_prefix</code> parameter to remove matching text from the start of each variable name:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="tidying.html#cb68-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(column_example,</span>
<span id="cb68-2"><a href="tidying.html#cb68-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">cols =</span> <span class="fu">c</span>(Month1, Month2, Month3),</span>
<span id="cb68-3"><a href="tidying.html#cb68-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">names_to =</span> <span class="st">&quot;Month&quot;</span>,</span>
<span id="cb68-4"><a href="tidying.html#cb68-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">values_to =</span> <span class="st">&quot;Temperature&quot;</span>,</span>
<span id="cb68-5"><a href="tidying.html#cb68-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">names_prefix =</span> <span class="st">&quot;(Month)&quot;</span>) <span class="co"># Remove text matching &quot;Month&quot; exactly</span></span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   Year  Month Temperature
##   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;
## 1 2012  1              10
## 2 2012  2              20
## 3 2012  3              30
## 4 2013  1              20
## 5 2013  2              30
## 6 2013  3              40
## 7 2014  1              30
## 8 2014  2              40
## 9 2014  3              50</code></pre>
<p>That’s pretty good, but that column is still a character column. We can fix that by using the <code>names_transform</code> parameter with a function that we want to use to transform the column:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="tidying.html#cb70-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(column_example,</span>
<span id="cb70-2"><a href="tidying.html#cb70-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">cols =</span> <span class="fu">c</span>(Month1, Month2, Month3),</span>
<span id="cb70-3"><a href="tidying.html#cb70-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">names_to =</span> <span class="st">&quot;Month&quot;</span>,</span>
<span id="cb70-4"><a href="tidying.html#cb70-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">values_to =</span> <span class="st">&quot;Temperature&quot;</span>,</span>
<span id="cb70-5"><a href="tidying.html#cb70-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">Month =</span> readr<span class="sc">::</span>parse_number))</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   Year  Month Temperature
##   &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;
## 1 2012      1          10
## 2 2012      2          20
## 3 2012      3          30
## 4 2013      1          20
## 5 2013      2          30
## 6 2013      3          40
## 7 2014      1          30
## 8 2014      2          40
## 9 2014      3          50</code></pre>
<p>That’s better. But what happens now if we get sent the same dataset but with all 12 months worth of data? We’d have to add those extra columns to our <code>cols</code> vector. Instead, we can use some <code>tidyselect</code> syntax to choose columns based on their features, like how they start:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="tidying.html#cb72-1" aria-hidden="true" tabindex="-1"></a>tidy_column_example <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(column_example,</span>
<span id="cb72-2"><a href="tidying.html#cb72-2" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">cols =</span> tidyselect<span class="sc">::</span><span class="fu">starts_with</span>(<span class="st">&quot;Month&quot;</span>),</span>
<span id="cb72-3"><a href="tidying.html#cb72-3" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">names_to =</span> <span class="st">&quot;Month&quot;</span>,</span>
<span id="cb72-4"><a href="tidying.html#cb72-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">values_to =</span> <span class="st">&quot;Temperature&quot;</span>,</span>
<span id="cb72-5"><a href="tidying.html#cb72-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">names_transform =</span> <span class="fu">list</span>(<span class="at">Month =</span> readr<span class="sc">::</span>parse_number))</span>
<span id="cb72-6"><a href="tidying.html#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tidy_column_example, <span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9 x 3
##   Year  Month Temperature
##   &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;
## 1 2012      1          10
## 2 2012      2          20
## 3 2012      3          30
## # … with 6 more rows</code></pre>
<p>Now our code will work regardless of how many months there are.</p>
<p>This is just one example of how we could convert one form of ‘messy’ data to the tidy format. In the wild you’ll get data that violates any of the three cardinal rules in many different ways, and we just don’t have the space to go through it here. If you do need how to convert some of the other forms of messy data, then the <code>{tidyr}</code> package has a number of <a href="https://tidyr.tidyverse.org/articles/index.html">vignettes</a> outlining many different ways to use the tidying tools it provides.</p>
</div>
<div id="pivoting-rows-to-columns-wider" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Pivoting rows to columns (wider)</h3>
<p>Most of the time you should be going from wide to long, but we’ll go through how to do the reverse for the occasions where it’s required. To transform the data to the wide format, we use the <code>pivot_wider()</code> function. At the simplest level, we just need to provide where the name comes from and where the values come from with the <code>names_from</code> and <code>values_from</code> parameters respectively:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="tidying.html#cb74-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(tidy_column_example, <span class="at">names_from =</span> Month, <span class="at">values_from =</span> Temperature)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   Year    `1`   `2`   `3`
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 2012     10    20    30
## 2 2013     20    30    40
## 3 2014     30    40    50</code></pre>
<p>To get our data more like we started, we can use the <code>names_prefix</code> argument to prepend the column names with a string:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="tidying.html#cb76-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(tidy_column_example, <span class="at">names_from =</span> Month, <span class="at">values_from =</span> Temperature, <span class="at">names_prefix =</span> <span class="st">&quot;Month&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   Year  Month1 Month2 Month3
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 2012      10     20     30
## 2 2013      20     30     40
## 3 2014      30     40     50</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cleaning.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="grouping.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
