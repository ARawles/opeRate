<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7.1 Abstraction | opeRate</title>
  <meta name="description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="7.1 Abstraction | opeRate" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="cover.png" />
  <meta property="og:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="github-repo" content="ARawles/opeRate" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7.1 Abstraction | opeRate" />
  
  <meta name="twitter:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="twitter:image" content="cover.png" />

<meta name="author" content="Adam Rawles" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="theory.html"/>
<link rel="next" href="returns.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> opeRate</a>
<ul>
<li class="chapter" data-level="1.1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>1.1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="overview.html"><a href="overview.html#acknowledgements"><i class="fa fa-check"></i><b>1.1.1</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="about-me.html"><a href="about-me.html"><i class="fa fa-check"></i><b>1.2</b> About Me</a></li>
<li class="chapter" data-level="1.3" data-path="using-r.html"><a href="using-r.html"><i class="fa fa-check"></i><b>1.3</b> Using R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="projects.html"><a href="projects.html"><i class="fa fa-check"></i><b>2</b> Projects</a>
<ul>
<li class="chapter" data-level="2.1" data-path="workflows.html"><a href="workflows.html"><i class="fa fa-check"></i><b>2.1</b> Workflows</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="workflows.html"><a href="workflows.html#basic-workflows"><i class="fa fa-check"></i><b>2.1.1</b> Basic Workflows</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="replicability.html"><a href="replicability.html"><i class="fa fa-check"></i><b>2.2</b> Replicability</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="replicability.html"><a href="replicability.html#good-practice"><i class="fa fa-check"></i><b>2.2.1</b> Good practice</a></li>
<li class="chapter" data-level="2.2.2" data-path="replicability.html"><a href="replicability.html#rmarkdown"><i class="fa fa-check"></i><b>2.2.2</b> RMarkdown</a></li>
<li class="chapter" data-level="2.2.3" data-path="replicability.html"><a href="replicability.html#shiny"><i class="fa fa-check"></i><b>2.2.3</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="projects-as-packages.html"><a href="projects-as-packages.html"><i class="fa fa-check"></i><b>2.3</b> Projects as packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>3</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>3.1</b> tidyr</a></li>
<li class="chapter" data-level="3.2" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>3.2</b> dplyr</a></li>
<li class="chapter" data-level="3.3" data-path="stringr.html"><a href="stringr.html"><i class="fa fa-check"></i><b>3.3</b> stringr</a></li>
<li class="chapter" data-level="3.4" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>3.4</b> ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-analysis.html"><a href="data-analysis.html"><i class="fa fa-check"></i><b>4</b> Data Analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="loading-data.html"><a href="loading-data.html"><i class="fa fa-check"></i><b>4.1</b> Loading data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="loading-data.html"><a href="loading-data.html#csv"><i class="fa fa-check"></i><b>4.1.1</b> csv</a></li>
<li class="chapter" data-level="4.1.2" data-path="loading-data.html"><a href="loading-data.html#excel-files"><i class="fa fa-check"></i><b>4.1.2</b> Excel files</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="using-apis.html"><a href="using-apis.html"><i class="fa fa-check"></i><b>4.2</b> Using APIs</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="using-apis.html"><a href="using-apis.html#what-are-apis"><i class="fa fa-check"></i><b>4.2.1</b> What are APIs?</a></li>
<li class="chapter" data-level="4.2.2" data-path="using-apis.html"><a href="using-apis.html#accessing-apis-in-r"><i class="fa fa-check"></i><b>4.2.2</b> Accessing APIs in R</a></li>
<li class="chapter" data-level="4.2.3" data-path="using-apis.html"><a href="using-apis.html#bmrsr"><i class="fa fa-check"></i><b>4.2.3</b> BMRSr</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="cleaning-and-tidying-data.html"><a href="cleaning-and-tidying-data.html"><i class="fa fa-check"></i><b>4.3</b> Cleaning and tidying data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="cleaning-and-tidying-data.html"><a href="cleaning-and-tidying-data.html#cleaning"><i class="fa fa-check"></i><b>4.3.1</b> Cleaning</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="section.html"><a href="section.html"><i class="fa fa-check"></i><b>4.4</b> </a></li>
<li class="chapter" data-level="4.5" data-path="summarisation.html"><a href="summarisation.html"><i class="fa fa-check"></i><b>4.5</b> Summarisation</a></li>
<li class="chapter" data-level="4.6" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>4.6</b> Plotting</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="advanced-data-analysis.html"><a href="advanced-data-analysis.html"><i class="fa fa-check"></i><b>5</b> Advanced data analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="plotting-1.html"><a href="plotting-1.html"><i class="fa fa-check"></i><b>5.1</b> Plotting</a></li>
<li class="chapter" data-level="5.2" data-path="modelling.html"><a href="modelling.html"><i class="fa fa-check"></i><b>5.2</b> Modelling</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="shiny-1.html"><a href="shiny-1.html"><i class="fa fa-check"></i><b>6</b> Shiny</a></li>
<li class="chapter" data-level="7" data-path="theory.html"><a href="theory.html"><i class="fa fa-check"></i><b>7</b> Theory</a>
<ul>
<li class="chapter" data-level="7.1" data-path="abstraction.html"><a href="abstraction.html"><i class="fa fa-check"></i><b>7.1</b> Abstraction</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="abstraction.html"><a href="abstraction.html#definition"><i class="fa fa-check"></i><b>7.1.1</b> Definition</a></li>
<li class="chapter" data-level="7.1.2" data-path="abstraction.html"><a href="abstraction.html#abstraction-in-r"><i class="fa fa-check"></i><b>7.1.2</b> Abstraction in R</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="returns.html"><a href="returns.html"><i class="fa fa-check"></i><b>7.2</b> Returns</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">opeRate</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="abstraction" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Abstraction</h2>
<p>For me, the biggest change in the quality and efficiency of my code was when I began learning about the concept of abstraction. Abstraction is essentially the process of breaking down complex processes and objects into their base function or quality. From here, we can abstract away levels of complexity, thus creating cleaner looking code.</p>
<p>Abstraction is relevant to every aspect of your projects, from how they are structured to your functions and code and so we’re going to spend some time understanding abstraction and how it can be applied.</p>
<div id="definition" class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Definition</h3>
<p>Abstraction is the idea of removing levels of complexity. For example, when you press a key on your keyboard and a letter appears on the screen, you don’t need to know how the keyboard interfaces with the computer, or how that stroke is eventually turned into coloured pixels on a screen. That degree of complexity has been <strong>abstracted</strong> away.</p>
<p>Another example is a calculator. You type in the numbers and decide what you want to do, and your general goal (say, adding two numbers together) is translated into the practicality of performing that action. Your general goal is translated into lots of little more specific ones.</p>
<p>The idea of abstraction is a very prevalent one in computer science. R itself is an abstraction; it lets you interface with the CPU without having to know everything about it. Understanding abstraction and particularly how it relates to functional programming and R can greatly improve the efficiency of your code. Understanding and applying abstraction is more of an art than a science. By abstracting away complexity, you make things easier for the user but you will take away some of the flexability, and so applying the concept of abstraction to your projects will always be a balancing act.</p>
</div>
<div id="abstraction-in-r" class="section level3" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Abstraction in R</h3>
<p>Finding examples of abstraction in existing R code is easy. For instance, in the <a href="https://teacher.arawles.co.uk">teacheR</a> book, we looked at how R used method dispatch to find the appropriate method for a particular type of object. If you print a dataframe, for instance, then R will find the appropriate method to print that type of object (a dataframe), and will eventually call the <code>print.data.frame()</code> function to do so. But that’s not what you have to type in. You just type <code>print(my_dataframe)</code> and R takes care of the rest. And that’s a good example of how R has abstracted away that complexity, instead focusing on the core goal - printing something.</p>
<p>Applying abstraction to your own R code can greatly improve your code cleanliness and efficiency. One of our main tools for implementing abstraction into our projects are functions. We want to break down our steps into their smallest constituent parts, and aim to create functions that are as simple as possible. We can then use these functions together to solve the overarching issue. The best way to demonstrate how powerful abstraction can be in R is probably through an example. First we’ll look at a simple example and then we’ll move onto something more complex.</p>
<div id="example-1---plotly-labels" class="section level4" number="7.1.2.1">
<h4><span class="header-section-number">7.1.2.1</span> Example 1 - <code>plotly</code> labels</h4>
<p>This is a real example of abstraction that I used very recently. The <code>plotly</code> package is a great library for producing interactive graphs for Shiny applications and RMarkdown documents. I often use the <code>ggplotly()</code> function, which takes a <code>ggplot</code> object and converts it to a plotly one.</p>
<p>One of the features of the package is that you can create a tooltip, such that the individual looking at the graph can hover their cursor over the line or bar or whatever and a little box will pop up showing them the value that they’re hovering over.</p>
<p>The tooltips are generated automatically from the aesthetics you define in your <code>ggplot2</code> call. So if you create a graph with an <code>x</code> called <code>x_val</code>, then the tooltip will say something like “x_val: 100” when you hover over it. This is fine, but it can look a bit messy when you don’t have very nice variable names, which I often don’t. Instead, you can create a new aesthetic (like <code>text</code>) and provide your values to that aesthetic with nicer names. For example:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="abstraction.html#cb34-1" aria-hidden="true" tabindex="-1"></a>gplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> x_val, <span class="at">y =</span> y_val, <span class="at">text =</span> <span class="fu">paste0</span>(<span class="st">&quot;Better X Label:&quot;</span> <span class="ot">=</span> x)))...</span>
<span id="cb34-2"><a href="abstraction.html#cb34-2" aria-hidden="true" tabindex="-1"></a>plotly_plot <span class="ot">&lt;-</span> <span class="fu">ggplotly</span>(gplot, <span class="at">tooltip =</span> <span class="st">&quot;text&quot;</span>)</span></code></pre></div>
<p>Now, the tooltip will show “Better X Label: 100” instead of “x: 100”. Much better.</p>
<p>But what about when you want to have more than one variable in the label? You could try adding more aesthetics and including them to the <code>tooltip</code> parameter (<code>tooltip = c("text", "label", etc.)</code>), but that could be tough if you’ve got more than a couple of aesthetics.</p>
<p>So let’s think less about the here and now and try and break this into the simplest possible terms. We want a function that will need to accept a new name for our variable, the variable values, and it will need to be able to accept any number of variables. After a bit of trial and error, this is the function I created:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="abstraction.html#cb35-1" aria-hidden="true" tabindex="-1"></a>plotly_label <span class="ot">&lt;-</span> <span class="cf">function</span>(labels) {</span>
<span id="cb35-2"><a href="abstraction.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  raw_lists <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map2</span>(<span class="fu">names</span>(labels), labels, <span class="cf">function</span>(name, values) {</span>
<span id="cb35-3"><a href="abstraction.html#cb35-3" aria-hidden="true" tabindex="-1"></a>    purrr<span class="sc">::</span><span class="fu">map</span>(values, <span class="sc">~</span><span class="fu">paste0</span>(name, <span class="st">&quot;: &quot;</span>, .x))</span>
<span id="cb35-4"><a href="abstraction.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb35-5"><a href="abstraction.html#cb35-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">pmap</span>(raw_lists, <span class="cf">function</span>(...) <span class="fu">paste</span>(..., <span class="at">sep =</span> <span class="st">&quot;&lt;br&gt;&quot;</span>))</span>
<span id="cb35-6"><a href="abstraction.html#cb35-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>This function accepts a list of name-value pairs, with the name representing the new name of the variable. This function then returns new labels (separated by a break) that can be used by <code>plotly</code>. So for instance, if I wanted to have labels for both my <code>x</code> and <code>y</code> variables, I could just do this:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="abstraction.html#cb36-1" aria-hidden="true" tabindex="-1"></a>gplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> x_val, <span class="at">y =</span> y_val, <span class="at">text =</span> <span class="fu">plotly_label</span>(<span class="fu">list</span>(<span class="st">&quot;Better X Label:&quot;</span> <span class="ot">=</span> x, <span class="st">&quot;Better Y Label:&quot;</span> <span class="ot">=</span> y))))...</span>
<span id="cb36-2"><a href="abstraction.html#cb36-2" aria-hidden="true" tabindex="-1"></a>plotly_plot <span class="ot">&lt;-</span> <span class="fu">ggplotly</span>(gplot, <span class="at">tooltip =</span> <span class="st">&quot;text&quot;</span>)</span></code></pre></div>
<p>We haven’t changed the world here, but we have created a function that can be used in multiple situations. We haven’t hard-coded anything in, meaning that theoretically we could create a tooltip with thousands of variables.</p>
</div>
<div id="example-2---plotting" class="section level4" number="7.1.2.2">
<h4><span class="header-section-number">7.1.2.2</span> Example 2 - Plotting</h4>
<p>For our first example, let’s imagine you want to create a full suite of graphics for a reporting project you’re working on. You’re going to want to create 10 different line charts and 5 different bar charts using different variables from 3 different datasets. Let’s look at some different ways we could go about doing this, applying different levels of abstraction:</p>
<div id="approach-1" class="section level5" number="7.1.2.2.1">
<h5><span class="header-section-number">7.1.2.2.1</span> Approach 1</h5>
<p>You could just write out the code needed for each plot. For example:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="abstraction.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb37-2"><a href="abstraction.html#cb37-2" aria-hidden="true" tabindex="-1"></a>linechart1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dataset1, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">colour =</span> groups)) <span class="sc">+</span></span>
<span id="cb37-3"><a href="abstraction.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb37-4"><a href="abstraction.html#cb37-4" aria-hidden="true" tabindex="-1"></a>linechart2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dataset2, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">colour =</span> second_grouping)) <span class="sc">+</span></span>
<span id="cb37-5"><a href="abstraction.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb37-6"><a href="abstraction.html#cb37-6" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb37-7"><a href="abstraction.html#cb37-7" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb37-8"><a href="abstraction.html#cb37-8" aria-hidden="true" tabindex="-1"></a>.</span></code></pre></div>
<p>After writing our all our code, we’d have 15 different graphs, but a lot of code and a lot of repitition. There’s lots of code here that’s being shared and every time the same call or section is duplicated, that’s twice the code that we might potentially have to debug.</p>
</div>
<div id="approach-2" class="section level5" number="7.1.2.2.2">
<h5><span class="header-section-number">7.1.2.2.2</span> Approach 2</h5>
<p>A different approach may be to create a different function for each plot. The function would take the dataset and spit out the graphic, a bit like this:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="abstraction.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb38-2"><a href="abstraction.html#cb38-2" aria-hidden="true" tabindex="-1"></a>create_first_linechart <span class="ot">&lt;-</span> <span class="cf">function</span>(data) {</span>
<span id="cb38-3"><a href="abstraction.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> column1, <span class="at">y =</span> column2, <span class="at">colour =</span> column3)) <span class="sc">+</span></span>
<span id="cb38-4"><a href="abstraction.html#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()</span>
<span id="cb38-5"><a href="abstraction.html#cb38-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-6"><a href="abstraction.html#cb38-6" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb38-7"><a href="abstraction.html#cb38-7" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb38-8"><a href="abstraction.html#cb38-8" aria-hidden="true" tabindex="-1"></a>.</span></code></pre></div>
<p>We would eventually have 15 different functions - one for each plot - that we could call to produce all of our graphics. Like this:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="abstraction.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">create_first_linechart</span>(dataset1)</span>
<span id="cb39-2"><a href="abstraction.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">create_second_linechart</span>(dataset2)</span>
<span id="cb39-3"><a href="abstraction.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">create_third_linechart</span>(dataset3)</span>
<span id="cb39-4"><a href="abstraction.html#cb39-4" aria-hidden="true" tabindex="-1"></a>.</span>
<span id="cb39-5"><a href="abstraction.html#cb39-5" aria-hidden="true" tabindex="-1"></a>.</span></code></pre></div>
<p>This is a bit cleaner than our first approach because we’ve separated out our graph-generation logic and it’s certainly a step in the right direction, but there’s still just as much repetition. Similarly, if there’s an error, we’re still going to have to debug each function separately.</p>
</div>
<div id="approach-3" class="section level5" number="7.1.2.2.3">
<h5><span class="header-section-number">7.1.2.2.3</span> Approach 3</h5>
<p>Building on the use of functions, we could create a function that will create all of the line charts and then a separate function that will create all of our bar charts. Our function to create our line charts might look like this:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="abstraction.html#cb40-1" aria-hidden="true" tabindex="-1"></a>create_linechart <span class="ot">&lt;-</span> <span class="cf">function</span>(data, x, y, colour) {</span>
<span id="cb40-2"><a href="abstraction.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> {{ x }}, <span class="at">y =</span> {{ y }}, <span class="at">colour =</span> {{ colour }})) <span class="sc">+</span></span>
<span id="cb40-3"><a href="abstraction.html#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()</span>
<span id="cb40-4"><a href="abstraction.html#cb40-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-5"><a href="abstraction.html#cb40-5" aria-hidden="true" tabindex="-1"></a>create_barchart <span class="ot">&lt;-</span> <span class="cf">function</span>(data, x, y, colour) {</span>
<span id="cb40-6"><a href="abstraction.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> {{ x }}, <span class="at">y =</span> {{ y }}, <span class="at">fill =</span> {{ colour }})) <span class="sc">+</span></span>
<span id="cb40-7"><a href="abstraction.html#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>()</span>
<span id="cb40-8"><a href="abstraction.html#cb40-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The <code>{{ }}</code> brackets let us pass column names from our function to the <code>aes()</code> function in <code>ggplot2</code>.</p>
<p>Then we’d still have to make 15 separate calls to create our graphics, but we’d have much less code to debug if something went wrong because we’re only relying on two functions, not the 15 we were before. Similarly, if we wanted to change something, we’d just have to change the two functions we created and that change would be propogated to all the 15 graphics.</p>
</div>
</div>
<div id="conclusion" class="section level4" number="7.1.2.3">
<h4><span class="header-section-number">7.1.2.3</span> Conclusion</h4>
<p>Ultimately, we’ve utilised the concept of abstraction to simplify our code and make debugging easier. The goal when writing code isn’t to write it perfectly first time round - in fact, aiming for perfection off the bat can often be detrimental to your work in the long run - but to strike a good balance of simplicity and functionality. There isn’t often a ‘perfect’ amount of abstraction - it just doesn’t really work that way, but the more you program and write code in R and the more you think about your problem and what the core goal you’re trying to acheive is, the better your code will become.</p>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="theory.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="returns.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
