<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9.1 Pivoting | opeRate</title>
  <meta name="description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="9.1 Pivoting | opeRate" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="cover.png" />
  <meta property="og:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="github-repo" content="ARawles/opeRate" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9.1 Pivoting | opeRate" />
  
  <meta name="twitter:description" content="Apply your knowledge of the R programming language to real problems and tasks." />
  <meta name="twitter:image" content="cover.png" />

<meta name="author" content="Adam Rawles" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="tidying.html"/>
<link rel="next" href="separating-uniting.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> opeRate</a>
<ul>
<li class="chapter" data-level="1.1" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>1.1</b> Overview</a></li>
<li class="chapter" data-level="1.2" data-path="about-me.html"><a href="about-me.html"><i class="fa fa-check"></i><b>1.2</b> About Me</a></li>
<li class="chapter" data-level="1.3" data-path="using-r.html"><a href="using-r.html"><i class="fa fa-check"></i><b>1.3</b> Using R</a></li>
</ul></li>
<li class="part"><span><b>I tidyverse</b></span></li>
<li class="chapter" data-level="2" data-path="tidyverse-introduction.html"><a href="tidyverse-introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>3</b> “Tidy” data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="questions.html"><a href="questions.html"><i class="fa fa-check"></i><b>3.1</b> Questions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-pipe.html"><a href="the-pipe.html"><i class="fa fa-check"></i><b>4</b> The pipe (<code>%&gt;%</code>)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="questions-1.html"><a href="questions-1.html"><i class="fa fa-check"></i><b>4.1</b> Questions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="quasiquotation.html"><a href="quasiquotation.html"><i class="fa fa-check"></i><b>5</b> Quasiquotation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidyselect.html"><a href="tidyselect.html"><i class="fa fa-check"></i><b>5.1</b> tidyselect</a></li>
<li class="chapter" data-level="5.2" data-path="questions-2.html"><a href="questions-2.html"><i class="fa fa-check"></i><b>5.2</b> Questions</a></li>
</ul></li>
<li class="part"><span><b>II Data Analysis</b></span></li>
<li class="chapter" data-level="6" data-path="da-intro.html"><a href="da-intro.html"><i class="fa fa-check"></i><b>6</b> Introduction</a></li>
<li class="chapter" data-level="7" data-path="loading.html"><a href="loading.html"><i class="fa fa-check"></i><b>7</b> Loading</a>
<ul>
<li class="chapter" data-level="7.1" data-path="rds.html"><a href="rds.html"><i class="fa fa-check"></i><b>7.1</b> RDS</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rds.html"><a href="rds.html#advantages"><i class="fa fa-check"></i><b>7.1.1</b> Advantages</a></li>
<li class="chapter" data-level="7.1.2" data-path="rds.html"><a href="rds.html#disadvantages"><i class="fa fa-check"></i><b>7.1.2</b> Disadvantages</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="csv.html"><a href="csv.html"><i class="fa fa-check"></i><b>7.2</b> CSV</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="csv.html"><a href="csv.html#loading-csv-files"><i class="fa fa-check"></i><b>7.2.1</b> Loading CSV files</a></li>
<li class="chapter" data-level="7.2.2" data-path="csv.html"><a href="csv.html#advantages-1"><i class="fa fa-check"></i><b>7.2.2</b> Advantages</a></li>
<li class="chapter" data-level="7.2.3" data-path="csv.html"><a href="csv.html#disadvantages-1"><i class="fa fa-check"></i><b>7.2.3</b> Disadvantages</a></li>
<li class="chapter" data-level="7.2.4" data-path="csv.html"><a href="csv.html#other-delimited-files"><i class="fa fa-check"></i><b>7.2.4</b> Other delimited files</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="excel-files.html"><a href="excel-files.html"><i class="fa fa-check"></i><b>7.3</b> Excel files</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="excel-files.html"><a href="excel-files.html#advantages-2"><i class="fa fa-check"></i><b>7.3.1</b> Advantages</a></li>
<li class="chapter" data-level="7.3.2" data-path="excel-files.html"><a href="excel-files.html#disadvantages-2"><i class="fa fa-check"></i><b>7.3.2</b> Disadvantages</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="web-based-apis.html"><a href="web-based-apis.html"><i class="fa fa-check"></i><b>7.4</b> Web-based APIs</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="web-based-apis.html"><a href="web-based-apis.html#what-are-apis"><i class="fa fa-check"></i><b>7.4.1</b> What are APIs?</a></li>
<li class="chapter" data-level="7.4.2" data-path="web-based-apis.html"><a href="web-based-apis.html#accessing-apis-in-r"><i class="fa fa-check"></i><b>7.4.2</b> Accessing APIs in R</a></li>
<li class="chapter" data-level="7.4.3" data-path="web-based-apis.html"><a href="web-based-apis.html#bmrsr"><i class="fa fa-check"></i><b>7.4.3</b> BMRSr</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="databases.html"><a href="databases.html"><i class="fa fa-check"></i><b>7.5</b> Databases</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="databases.html"><a href="databases.html#database-management-systems-and-odbc"><i class="fa fa-check"></i><b>7.5.1</b> Database Management Systems and ODBC</a></li>
<li class="chapter" data-level="7.5.2" data-path="databases.html"><a href="databases.html#connecting-with-the-odbc-package"><i class="fa fa-check"></i><b>7.5.2</b> Connecting with the <code>odbc</code> package</a></li>
<li class="chapter" data-level="7.5.3" data-path="databases.html"><a href="databases.html#querying-the-database"><i class="fa fa-check"></i><b>7.5.3</b> Querying the database</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="cleaning.html"><a href="cleaning.html"><i class="fa fa-check"></i><b>8</b> Cleaning</a>
<ul>
<li class="chapter" data-level="8.1" data-path="filtering.html"><a href="filtering.html"><i class="fa fa-check"></i><b>8.1</b> Filtering</a></li>
<li class="chapter" data-level="8.2" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>8.2</b> Missing values</a></li>
<li class="chapter" data-level="8.3" data-path="changing-column-types.html"><a href="changing-column-types.html"><i class="fa fa-check"></i><b>8.3</b> Changing column types</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tidying.html"><a href="tidying.html"><i class="fa fa-check"></i><b>9</b> Tidying</a>
<ul>
<li class="chapter" data-level="9.1" data-path="pivoting.html"><a href="pivoting.html"><i class="fa fa-check"></i><b>9.1</b> Pivoting</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="pivoting.html"><a href="pivoting.html#pivoting-columns-to-rows-longer"><i class="fa fa-check"></i><b>9.1.1</b> Pivoting columns to rows (longer)</a></li>
<li class="chapter" data-level="9.1.2" data-path="pivoting.html"><a href="pivoting.html#pivoting-rows-to-columns-wider"><i class="fa fa-check"></i><b>9.1.2</b> Pivoting rows to columns (wider)</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="separating-uniting.html"><a href="separating-uniting.html"><i class="fa fa-check"></i><b>9.2</b> Separating &amp; Uniting</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="separating-uniting.html"><a href="separating-uniting.html#separating"><i class="fa fa-check"></i><b>9.2.1</b> Separating</a></li>
<li class="chapter" data-level="9.2.2" data-path="separating-uniting.html"><a href="separating-uniting.html#uniting"><i class="fa fa-check"></i><b>9.2.2</b> Uniting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="grouping.html"><a href="grouping.html"><i class="fa fa-check"></i><b>10</b> Grouping</a></li>
<li class="chapter" data-level="11" data-path="mutating.html"><a href="mutating.html"><i class="fa fa-check"></i><b>11</b> Mutating</a></li>
<li class="chapter" data-level="12" data-path="summarising.html"><a href="summarising.html"><i class="fa fa-check"></i><b>12</b> Summarising</a></li>
<li class="chapter" data-level="13" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>13</b> Plotting</a>
<ul>
<li class="chapter" data-level="13.1" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>13.1</b> ggplot2</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="ggplot2.html"><a href="ggplot2.html#components"><i class="fa fa-check"></i><b>13.1.1</b> Components</a></li>
<li class="chapter" data-level="13.1.2" data-path="ggplot2.html"><a href="ggplot2.html#layers"><i class="fa fa-check"></i><b>13.1.2</b> Layers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="modelling.html"><a href="modelling.html"><i class="fa fa-check"></i><b>14</b> Modelling</a>
<ul>
<li class="chapter" data-level="14.1" data-path="types-of-model.html"><a href="types-of-model.html"><i class="fa fa-check"></i><b>14.1</b> Types of model</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="types-of-model.html"><a href="types-of-model.html#linear-models"><i class="fa fa-check"></i><b>14.1.1</b> Linear models</a></li>
<li class="chapter" data-level="14.1.2" data-path="types-of-model.html"><a href="types-of-model.html#quadratic-exponential-models"><i class="fa fa-check"></i><b>14.1.2</b> Quadratic &amp; Exponential Models</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="coefficients.html"><a href="coefficients.html"><i class="fa fa-check"></i><b>14.2</b> Coefficients</a></li>
<li class="chapter" data-level="14.3" data-path="residuals.html"><a href="residuals.html"><i class="fa fa-check"></i><b>14.3</b> Residuals</a></li>
<li class="chapter" data-level="14.4" data-path="lm.html"><a href="lm.html"><i class="fa fa-check"></i><b>14.4</b> <code>lm()</code></a></li>
<li class="chapter" data-level="14.5" data-path="multiple-predictors.html"><a href="multiple-predictors.html"><i class="fa fa-check"></i><b>14.5</b> Multiple Predictors</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="multiple-predictors.html"><a href="multiple-predictors.html#simple-effects"><i class="fa fa-check"></i><b>14.5.1</b> Simple effects</a></li>
<li class="chapter" data-level="14.5.2" data-path="multiple-predictors.html"><a href="multiple-predictors.html#interaction-effects"><i class="fa fa-check"></i><b>14.5.2</b> Interaction effects</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="evaluating-models.html"><a href="evaluating-models.html"><i class="fa fa-check"></i><b>14.6</b> Evaluating Models</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="evaluating-models.html"><a href="evaluating-models.html#lm-output"><i class="fa fa-check"></i><b>14.6.1</b> <code>lm()</code> Output</a></li>
<li class="chapter" data-level="14.6.2" data-path="evaluating-models.html"><a href="evaluating-models.html#residuals-1"><i class="fa fa-check"></i><b>14.6.2</b> Residuals</a></li>
<li class="chapter" data-level="14.6.3" data-path="evaluating-models.html"><a href="evaluating-models.html#overfitting"><i class="fa fa-check"></i><b>14.6.3</b> Overfitting</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="video-game-sales-model.html"><a href="video-game-sales-model.html"><i class="fa fa-check"></i><b>14.7</b> Video Game Sales Model</a></li>
<li class="chapter" data-level="14.8" data-path="questions-3.html"><a href="questions-3.html"><i class="fa fa-check"></i><b>14.8</b> Questions</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>15</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="15.1" data-path="neural-networks.html"><a href="neural-networks.html"><i class="fa fa-check"></i><b>15.1</b> Neural networks</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="neural-networks.html"><a href="neural-networks.html#introduction"><i class="fa fa-check"></i><b>15.1.1</b> Introduction</a></li>
<li class="chapter" data-level="15.1.2" data-path="neural-networks.html"><a href="neural-networks.html#example"><i class="fa fa-check"></i><b>15.1.2</b> Example</a></li>
<li class="chapter" data-level="15.1.3" data-path="neural-networks.html"><a href="neural-networks.html#neural-networks-in-r"><i class="fa fa-check"></i><b>15.1.3</b> Neural Networks in R</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Projects</b></span></li>
<li class="chapter" data-level="16" data-path="projects-introduction.html"><a href="projects-introduction.html"><i class="fa fa-check"></i><b>16</b> Introduction</a></li>
<li class="chapter" data-level="17" data-path="workflows.html"><a href="workflows.html"><i class="fa fa-check"></i><b>17</b> Workflows</a>
<ul>
<li class="chapter" data-level="17.1" data-path="basic-workflow.html"><a href="basic-workflow.html"><i class="fa fa-check"></i><b>17.1</b> Basic Workflow</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="basic-workflow.html"><a href="basic-workflow.html#example-1-reporting"><i class="fa fa-check"></i><b>17.1.1</b> Example 1: Reporting</a></li>
<li class="chapter" data-level="17.1.2" data-path="basic-workflow.html"><a href="basic-workflow.html#example-2-modelling"><i class="fa fa-check"></i><b>17.1.2</b> Example 2: Modelling</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="separating-stages.html"><a href="separating-stages.html"><i class="fa fa-check"></i><b>17.2</b> Separating Stages</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="separating-stages.html"><a href="separating-stages.html#functions"><i class="fa fa-check"></i><b>17.2.1</b> Functions</a></li>
<li class="chapter" data-level="17.2.2" data-path="separating-stages.html"><a href="separating-stages.html#files"><i class="fa fa-check"></i><b>17.2.2</b> Files</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>17.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="replicability.html"><a href="replicability.html"><i class="fa fa-check"></i><b>18</b> Replicability</a>
<ul>
<li class="chapter" data-level="18.1" data-path="good-practice.html"><a href="good-practice.html"><i class="fa fa-check"></i><b>18.1</b> Good practice</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="good-practice.html"><a href="good-practice.html#use-a-consistent-naming-convention"><i class="fa fa-check"></i><b>18.1.1</b> Use a consistent naming convention</a></li>
<li class="chapter" data-level="18.1.2" data-path="good-practice.html"><a href="good-practice.html#name-your-variables-as-nouns-and-your-functions-as-verbs"><i class="fa fa-check"></i><b>18.1.2</b> Name your variables as nouns and your functions as verbs</a></li>
<li class="chapter" data-level="18.1.3" data-path="good-practice.html"><a href="good-practice.html#use-functions-where-you-can"><i class="fa fa-check"></i><b>18.1.3</b> Use functions where you can</a></li>
<li class="chapter" data-level="18.1.4" data-path="good-practice.html"><a href="good-practice.html#state-your-dependencies"><i class="fa fa-check"></i><b>18.1.4</b> State your dependencies</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="documentation.html"><a href="documentation.html"><i class="fa fa-check"></i><b>18.2</b> Documentation</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="documentation.html"><a href="documentation.html#function-documentation"><i class="fa fa-check"></i><b>18.2.1</b> Function documentation</a></li>
<li class="chapter" data-level="18.2.2" data-path="documentation.html"><a href="documentation.html#long-form-documentation"><i class="fa fa-check"></i><b>18.2.2</b> Long-form documentation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="projects-as-packages.html"><a href="projects-as-packages.html"><i class="fa fa-check"></i><b>19</b> Projects as Packages</a>
<ul>
<li class="chapter" data-level="19.1" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>19.1</b> Structure</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="structure.html"><a href="structure.html#r-code"><i class="fa fa-check"></i><b>19.1.1</b> R code</a></li>
<li class="chapter" data-level="19.1.2" data-path="structure.html"><a href="structure.html#data"><i class="fa fa-check"></i><b>19.1.2</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="documentation-1.html"><a href="documentation-1.html"><i class="fa fa-check"></i><b>19.2</b> Documentation</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="documentation-1.html"><a href="documentation-1.html#functional"><i class="fa fa-check"></i><b>19.2.1</b> Functional</a></li>
<li class="chapter" data-level="19.2.2" data-path="documentation-1.html"><a href="documentation-1.html#long-form"><i class="fa fa-check"></i><b>19.2.2</b> Long-form</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="description.html"><a href="description.html"><i class="fa fa-check"></i><b>19.3</b> DESCRIPTION</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="description.html"><a href="description.html#dependencies"><i class="fa fa-check"></i><b>19.3.1</b> Dependencies</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="abstraction.html"><a href="abstraction.html"><i class="fa fa-check"></i><b>19.4</b> Abstraction</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="git-github.html"><a href="git-github.html"><i class="fa fa-check"></i><b>20</b> Git &amp; GitHub</a></li>
<li class="chapter" data-level="21" data-path="project-example.html"><a href="project-example.html"><i class="fa fa-check"></i><b>21</b> Project Example</a></li>
<li class="chapter" data-level="22" data-path="answers.html"><a href="answers.html"><i class="fa fa-check"></i><b>22</b> Answers</a>
<ul>
<li class="chapter" data-level="22.1" data-path="tidy-data-1.html"><a href="tidy-data-1.html"><i class="fa fa-check"></i><b>22.1</b> “Tidy” data</a></li>
<li class="chapter" data-level="22.2" data-path="the-pipe-1.html"><a href="the-pipe-1.html"><i class="fa fa-check"></i><b>22.2</b> The pipe (%&gt;%)</a></li>
<li class="chapter" data-level="22.3" data-path="quasiquotation-1.html"><a href="quasiquotation-1.html"><i class="fa fa-check"></i><b>22.3</b> Quasiquotation</a></li>
<li class="chapter" data-level="22.4" data-path="loading-1.html"><a href="loading-1.html"><i class="fa fa-check"></i><b>22.4</b> Loading</a></li>
<li class="chapter" data-level="22.5" data-path="cleaning-1.html"><a href="cleaning-1.html"><i class="fa fa-check"></i><b>22.5</b> Cleaning</a></li>
<li class="chapter" data-level="22.6" data-path="tidying-1.html"><a href="tidying-1.html"><i class="fa fa-check"></i><b>22.6</b> Tidying</a></li>
<li class="chapter" data-level="22.7" data-path="grouping-1.html"><a href="grouping-1.html"><i class="fa fa-check"></i><b>22.7</b> Grouping</a></li>
<li class="chapter" data-level="22.8" data-path="mutating-1.html"><a href="mutating-1.html"><i class="fa fa-check"></i><b>22.8</b> Mutating</a></li>
<li class="chapter" data-level="22.9" data-path="summarising-1.html"><a href="summarising-1.html"><i class="fa fa-check"></i><b>22.9</b> Summarising</a></li>
<li class="chapter" data-level="22.10" data-path="plotting-1.html"><a href="plotting-1.html"><i class="fa fa-check"></i><b>22.10</b> Plotting</a></li>
<li class="chapter" data-level="22.11" data-path="modelling-1.html"><a href="modelling-1.html"><i class="fa fa-check"></i><b>22.11</b> Modelling</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">opeRate</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pivoting" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Pivoting</h2>
<p>The main culprit of untidy data is data that breaks the first rule: Not every column is a variable. Data in this format is sometimes called wide data - as you add more levels, you’ll add more columns and so the data will get wider. Conversely, tidy data will get longer as you add more levels.</p>
<p>So there two different forms of data:</p>
<ul>
<li>Long</li>
<li>Wide</li>
</ul>
<p>Let’s look at use our Kaggle dataset as an example to see how the two forms differ in practice:</p>
<pre><code>## # A tibble: 16,327 x 7
##    Year Name              NA_Sales EU_Sales JP_Sales Other_Sales Global_Sales
##   &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1  2006 Wii Sports            41.5    29.0      3.77        8.46         82.7
## 2  1985 Super Mario Bros.     29.1     3.58     6.81        0.77         40.2
## 3  2008 Mario Kart Wii        15.8    12.9      3.79        3.31         35.8
## # … with 16,324 more rows</code></pre>
<p>What would happen if we added data for more countries? We’d be adding more columns, and so our data would get wider. So our <code>clean_vg_sales</code> data is currently in the wide format. If we had the country as its own column however, like this:</p>
<pre><code>## # A tibble: 81,635 x 3
##    Year Country Sales
##   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1  2006 NA      41.5 
## 2  2006 EU      29.0 
## 3  2006 JP       3.77
## 4  2006 Other    8.46
## 5  2006 Global  82.7 
## # … with 81,630 more rows</code></pre>
<p>Now we’ve got the country as a variable, the more countries we add the longer the data is going to get. So we’ve converted our data from the wide format to the long format. To do this, we’ve pivoted the Sales columns. Let’s look at the two types of pivot.</p>
<p><strong>Note:</strong>
One thing to keep in mind is that long data does not always mean tidy, but wide data can never be tidy. It’s a subtle distinction but it’s important to remember.</p>
<div id="pivoting-columns-to-rows-longer" class="section level3" number="9.1.1">
<h3><span class="header-section-number">9.1.1</span> Pivoting columns to rows (longer)</h3>
<p>To convert wide data to long, we need to pivot the columns to rows. To this using <code>{tidyr}</code>, we use the <code>pivot_longer()</code> function because we want to pivot from the wide format to the long format.</p>
<p>To do this in the simplest way, we just need to tell the function which columns we want to pivot:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="pivoting.html#cb75-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(clean_vg_sales, <span class="at">cols =</span> <span class="fu">c</span>(NA_Sales, EU_Sales, JP_Sales, Other_Sales, Global_Sales)) <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="pivoting.html#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We&#39;ll just look at the columns we&#39;re interested in for the moment</span></span>
<span id="cb75-3"><a href="pivoting.html#cb75-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Name, Year, name, value) <span class="sc">%&gt;%</span></span>
<span id="cb75-4"><a href="pivoting.html#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 81,635 x 4
##   Name        Year name     value
##   &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
## 1 Wii Sports  2006 NA_Sales  41.5
## 2 Wii Sports  2006 EU_Sales  29.0
## # … with 81,633 more rows</code></pre>
<p>This is a good start. Now we’ve converted to long format, we’re abiding by the three rules and so we’ve got a tidy dataset! But there’s definitely some improvements to be done. Firstly, “name” and “value” aren’t the best names we could come up with for these columns, so we should probably use some new ones. To do this, we just need to provide new names to the <code>names_to</code> and <code>values_to</code> parameters:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="pivoting.html#cb77-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(clean_vg_sales,</span>
<span id="cb77-2"><a href="pivoting.html#cb77-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">cols =</span> <span class="fu">c</span>(NA_Sales, EU_Sales, JP_Sales, Other_Sales, Global_Sales),</span>
<span id="cb77-3"><a href="pivoting.html#cb77-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">names_to =</span> <span class="st">&quot;Country&quot;</span>,</span>
<span id="cb77-4"><a href="pivoting.html#cb77-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">values_to =</span> <span class="st">&quot;Sales&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-5"><a href="pivoting.html#cb77-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Name, Year, Country, Sales) <span class="sc">%&gt;%</span></span>
<span id="cb77-6"><a href="pivoting.html#cb77-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 81,635 x 4
##   Name        Year Country  Sales
##   &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
## 1 Wii Sports  2006 NA_Sales  41.5
## 2 Wii Sports  2006 EU_Sales  29.0
## # … with 81,633 more rows</code></pre>
<p>Secondly, our Country column has the country code suffixed with ’_Sales’ (e.g. “NA_Sales” instead of just “NA”). If the text we wanted to remove was before the country name, we could utilise the <code>names_prefix</code> parameter to remove matching text from the start of each variable name:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="pivoting.html#cb79-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(clean_vg_sales,</span>
<span id="cb79-2"><a href="pivoting.html#cb79-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">cols =</span> <span class="fu">c</span>(NA_Sales, EU_Sales, JP_Sales, Other_Sales, Global_Sales),</span>
<span id="cb79-3"><a href="pivoting.html#cb79-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">names_to =</span> <span class="st">&quot;Country&quot;</span>,</span>
<span id="cb79-4"><a href="pivoting.html#cb79-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">values_to =</span> <span class="st">&quot;Sales&quot;</span>,</span>
<span id="cb79-5"><a href="pivoting.html#cb79-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">names_prefix =</span> <span class="st">&quot;(_Sales)&quot;</span>) <span class="co"># Remove text matching &quot;_Sales&quot; exactly</span></span></code></pre></div>
<p>Because it’s at the end of the string though, we have to deal with it a bit differently. One way to remove that text would be to split the column name by the “_” and then just exclude the second part:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="pivoting.html#cb80-1" aria-hidden="true" tabindex="-1"></a>tidy_vg_sales <span class="ot">&lt;-</span> clean_vg_sales <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="pivoting.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(NA_Sales, EU_Sales, JP_Sales, Other_Sales, Global_Sales),</span>
<span id="cb80-3"><a href="pivoting.html#cb80-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;Country&quot;</span>, <span class="cn">NA</span>), <span class="at">values_to =</span> <span class="st">&quot;Sales&quot;</span>, <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb80-4"><a href="pivoting.html#cb80-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb80-5"><a href="pivoting.html#cb80-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-6"><a href="pivoting.html#cb80-6" aria-hidden="true" tabindex="-1"></a>tidy_vg_sales <span class="sc">%&gt;%</span></span>
<span id="cb80-7"><a href="pivoting.html#cb80-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, Country, Sales) <span class="sc">%&gt;%</span></span>
<span id="cb80-8"><a href="pivoting.html#cb80-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 81,635 x 3
##    Year Country Sales
##   &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1  2006 NA      41.5 
## 2  2006 EU      29.0 
## 3  2006 JP       3.77
## 4  2006 Other    8.46
## 5  2006 Global  82.7 
## # … with 81,630 more rows</code></pre>
<p>Here, we’ve specified that we want to convert our column names to two separate ‘names’ columns, but that we want to exclude the second column (that’s what the <code>NA</code> in the <code>c("Country", NA)</code> vector represents). Then, we’ve specified with the <code>names_sep</code> parameter that we want to split the columns by the <code>_</code> character.</p>
<p>But what happens now if we get sent the same dataset but with more countries (e.g. a <code>SA_Sales</code> column)? We’d have to add those extra columns to our <code>cols</code> vector manually. Instead, we can use some <code>tidyselect</code> syntax to choose columns based on their features, like how they end:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="pivoting.html#cb82-1" aria-hidden="true" tabindex="-1"></a>clean_vg_sales <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="pivoting.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_Sales&quot;</span>),</span>
<span id="cb82-3"><a href="pivoting.html#cb82-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;Country&quot;</span>, <span class="cn">NA</span>), <span class="at">values_to =</span> <span class="st">&quot;Sales&quot;</span>, <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb82-4"><a href="pivoting.html#cb82-4" aria-hidden="true" tabindex="-1"></a>  ) </span></code></pre></div>
<p>Now our code will work with any number of columns as long as they end in ’_Sales’.</p>
<p>This is just one example of how we could utilise the <code>pivot_longer()</code> function to convert ‘messy’ data to the tidy format. In the wild you’ll get data that violates any of the three rules of tidy data in many different ways, and we just don’t have the space to go through it here. If you do need how to convert some of the other forms of messy data, then the <code>{tidyr}</code> package has a number of <a href="https://tidyr.tidyverse.org/articles/index.html">vignettes</a> outlining many different ways to use the tidying tools it provides.</p>
</div>
<div id="pivoting-rows-to-columns-wider" class="section level3" number="9.1.2">
<h3><span class="header-section-number">9.1.2</span> Pivoting rows to columns (wider)</h3>
<p>Most of the time you should be going from wide to long, but we’ll go through how to do the reverse for the occasions where it’s required. To transform the data to the wide format, we use the <code>pivot_wider()</code> function. At the simplest level, we just need to provide where the name comes from and where the values come from with the <code>names_from</code> and <code>values_from</code> parameters respectively:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="pivoting.html#cb83-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(tidy_vg_sales, <span class="at">names_from =</span> Country, <span class="at">values_from =</span> Sales)</span></code></pre></div>
<pre><code>## # A tibble: 16,327 x 11
##     Rank Name     Platform  Year Genre  Publisher  `NA`    EU    JP Other Global
##    &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1     1 Wii Spo… Wii       2006 Sports Nintendo   41.5 29.0   3.77 8.46    82.7
##  2     2 Super M… NES       1985 Platf… Nintendo   29.1  3.58  6.81 0.77    40.2
##  3     3 Mario K… Wii       2008 Racing Nintendo   15.8 12.9   3.79 3.31    35.8
##  4     4 Wii Spo… Wii       2009 Sports Nintendo   15.8 11.0   3.28 2.96    33  
##  5     5 Pokemon… GB        1996 Role-… Nintendo   11.3  8.89 10.2  1       31.4
##  6     6 Tetris   GB        1989 Puzzle Nintendo   23.2  2.26  4.22 0.580   30.3
##  7     7 New Sup… DS        2006 Platf… Nintendo   11.4  9.23  6.5  2.9     30.0
##  8     8 Wii Play Wii       2006 Misc   Nintendo   14.0  9.2   2.93 2.85    29.0
##  9     9 New Sup… Wii       2009 Platf… Nintendo   14.6  7.06  4.7  2.26    28.6
## 10    10 Duck Hu… NES       1984 Shoot… Nintendo   26.9  0.63  0.28 0.47    28.3
## # … with 16,317 more rows</code></pre>
<p>To get our data more like we started, we can use the <code>names_glue</code> to provide a <a href="https://glue.tidyverse.org/"><code>{glue}</code></a> string argument to create the column names from a template:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="pivoting.html#cb85-1" aria-hidden="true" tabindex="-1"></a>tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(tidy_vg_sales, <span class="at">names_from =</span> Country, <span class="at">values_from =</span> Sales,</span>
<span id="cb85-2"><a href="pivoting.html#cb85-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">names_glue =</span> <span class="st">&quot;{Country}_Sales&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="pivoting.html#cb85-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Year, Name, tidyselect<span class="sc">::</span><span class="fu">ends_with</span>(<span class="st">&quot;_Sales&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb85-4"><a href="pivoting.html#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 16,327 x 7
##    Year Name                 NA_Sales EU_Sales JP_Sales Other_Sales Global_Sales
##   &lt;dbl&gt; &lt;chr&gt;                   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;
## 1  2006 Wii Sports               41.5    29.0      3.77        8.46         82.7
## 2  1985 Super Mario Bros.        29.1     3.58     6.81        0.77         40.2
## 3  2008 Mario Kart Wii           15.8    12.9      3.79        3.31         35.8
## 4  2009 Wii Sports Resort        15.8    11.0      3.28        2.96         33  
## 5  1996 Pokemon Red/Pokemon…     11.3     8.89    10.2         1            31.4
## # … with 16,322 more rows</code></pre>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tidying.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="separating-uniting.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
